// ================================================================================================
//! \file       MotParm_EV8M5_430A.h
//! \brief      
//! \author     sunyanjun
//! \version    1.0.0
//! \date       2017年4月12日
//! \copyright  SANTROLL.
// ================================================================================================

#ifndef _MOTPARM_EV8M5_430A_H_
#define _MOTPARM_EV8M5_430A_H_

//! @defgroup MOTPARM_EV8M5_430A
//! @{

#ifdef __cplusplus
extern "C" {
#endif
// ================================================================================================
// the includes

// ================================================================================================
// the defines

#define ELECZERO              90       //!< 电机旋变零点
#define CURBASE   (4300 * SQRT2)       //!< 电流基值(峰值)*0.1A
#define VOLTBASE            5400       //!< 电压基值*0.1V
#define SPEEDBASE           5000       //!< 转速基值
#define IF                  3324       //!< 等效励磁电流*0.1A
#define BEMF                3180       //!< 1000rpm反电势对应的电压 *0.1V
#define MOTPOLEPAIRS        6          //!< 电机极对数#
#define ENCODERPOLEPAIRS    6          //!< 旋变极对数#
#define SWAPENCODERDIR      0          //!< 旋变方向换向
#if EVCBD_ID == 0x05 || EVCBD_ID == 0x06
#define SWAPPHASE           0          //!< 电机相线换向
#else
#define SWAPPHASE           1          //!< 电机相线换向
#endif
//y = 2.1798x3 - 4.5768x2 + 3.31x + 0.0178
#define MTPA_K3             2.1798     //!< MTPA拟合3次方系数#
#define MTPA_K2             (-4.5768)  //!< MTPA拟合2次方系数#
#define MTPA_K1             3.31     //!< MTPA拟合1次方系数#
#define MTPA_K0             0.0178     //!< MTPA拟合0次方系数#
#define PEAKPOWER           0          //!< 输出机械功率限制 ，0.1Kw,0=不限制
#define PEAKTORQUE          0          //!< 输出扭矩限制，  NM,0=不限制

#define PWM_LOW_FREQ        2000       //!< 低频，2K
#define PWM_HIGH_FREQ       5100       //!< 高频，5k 高低相等不变频
#define PWM_LOW_FREQ_HZ     2          //!< 低频，电机Hz
#define PWM_HIGH_FREQ_HZ    10         //!< 高频，电机Hz 高低相等不变频

#define KP_ID               3500       //!< D轴Kp参数*0.001
#define KI_ID               2500       //!< D轴Ki参数*0.0001
#define KP_IQ               3500       //!< Q轴Kp参数*0.001
#define KI_IQ               2500       //!< Q轴Ki参数*0.0001
#define KP_FW1              250        //!< IdWeak_Kp参数*0.001
#define KI_FW1              58         //!< IdWeak_Ki参数*0.0001
#define KP_FW2              62         //!< AngleWeak_Kp参数*0.001
#define KI_FW2              15         //!< AngleWeak_Ki参数*0.0001
#define FW1_REF             1.05       //!< IdWeak参考
#define FW2_REF             1.05       //!< AngleWeak参考
#define UDMAX               1.4        //!< D轴电压最大值
#define UQMAX               1.4        //!< Q轴电压最大值

#define DCOVERCUR           5000       //!< 母线过流       0.1A
#define ACOVERCUR1          7400       //!< 相线过流1 0.1A(峰值)
#define ACOVERCUR2          7800       //!< 相线过流2 0.1A(峰值)
#define DCOVERVOLT3         7800       //!< 电压过压3 0.1V
#define DCOVERVOLT2         7500       //!< 电压过压2 0.1V
#define DCOVERVOLT1         7200       //!< 电压过压1 0.1V
#define DCUNDERVOLT1        4000       //!< 电压欠压1 0.1V
#define DCUNDERVOLT2        3000       //!< 电压欠压2 0.1V
#define DCUNDERVOLT3         300       //!< 电压欠压3 0.1V

#define OVERSPD1            3500       //!< 超速1转速
#define OVERSPD2            4000       //!< 超速2转速
#define KP_SPDLIMIT         4000       //!< 限速Kp参数*0.001
#define KI_SPDLIMIT         200        //!< 限速Ki参数*0.0001

#define DIRVECURLIMIT       5000       //!< 驱动母线电流限制*0.1A
#define BRAKECURLIMIT       5000       //!< 制动母线电流限制*0.1A
#define KP_IDCLIMIT         500        //!< 母线限流Kp参数*0.001
#define KI_IDCLIMIT         100        //!< 母线限流Ki参数*0.0001


#define KP_SPDM0            8000       //!< 速度模式0Kp参数*0.001
#define KI_SPDM0            200        //!< 速度模式0Ki参数*0.0001
#define KP_SPDM1            1000       //!< 速度模式1Kp参数*0.001
#define KI_SPDM1            100        //!< 速度模式1Ki参数*0.0001
#define KP_SPDM2            1000       //!< 速度模式2Kp参数*0.001
#define KI_SPDM2            100        //!< 速度模式2Ki参数*0.0001

#define PT100_1             1          //!< PT100_1 0==>没有
#define PT100_2             1          //!< PT100_2 0==>没有


#define TABNSTART           500        //!< 电机特性表中转速起始值rpm
#define TABNEND             3500       //!< 电机特性表中转速最高值rpm
#define TABNNUM             31         //!< 电机特性表中转速点数
#define TABNREFU            3612       //!< 测定特性表时的电压0.1V
#define TABNREFCUR     (4300 * SQRT2)  //!< 测点特性表时的电流0.1A
#define TABYNUM             11         //!< 纵坐标列数


#define TM_TAB {2031,1983,1710,1447,1233,1074,946 ,846 ,764 ,702 ,\
        643 ,593 ,550 ,513 ,480 ,451 ,425 ,402 ,380 ,362 ,\
        344 ,329 ,314 ,300 ,287 ,275 ,264 ,254 ,244 ,235 ,\
        226 }

#define ISM_TAB {\
        1.0000,1.0000,1.0000,0.9900,0.9500,0.8676,0.8025,0.7263,0.6630,0.6020,\
        0.5634,0.5214,0.4925,0.4504,0.4308,0.3963,0.3780,0.3612,0.3406,0.3261,\
        0.3081,0.2968,0.2827,0.2717,0.2642,0.2448,0.2404,0.2327,0.2237,0.2160,\
        0.2066,}

#define TLIN_TAB  {\
        0.0000,0.1120,0.2042,0.2917,0.3786,0.4687,0.5621,0.6605,0.7660,0.8779,1.0000,\
        0.0000,0.1098,0.2002,0.2844,0.3701,0.4574,0.5473,0.6417,0.7419,0.8536,1.0000,\
        0.0000,0.0972,0.1757,0.2501,0.3236,0.3985,0.4804,0.5703,0.6717,0.7939,1.0000,\
        0.0000,0.0833,0.1530,0.2203,0.2902,0.3652,0.4448,0.5306,0.6269,0.7475,1.0000,\
        0.0000,0.0745,0.1435,0.2104,0.2822,0.3568,0.4344,0.5168,0.6088,0.7208,1.0000,\
        0.0000,0.0730,0.1474,0.2226,0.2983,0.3750,0.4549,0.5397,0.6339,0.7495,1.0000,\
        0.0000,0.0812,0.1619,0.2407,0.3179,0.3950,0.4747,0.5575,0.6476,0.7546,1.0000,\
        0.0000,0.0750,0.1535,0.2323,0.3094,0.3866,0.4655,0.5481,0.6386,0.7480,1.0000,\
        0.0000,0.0686,0.1414,0.2179,0.2949,0.3734,0.4538,0.5387,0.6329,0.7465,1.0000,\
        0.0000,0.0642,0.1327,0.2069,0.2840,0.3634,0.4465,0.5350,0.6322,0.7506,1.0000,\
        0.0000,0.0594,0.1222,0.1922,0.2683,0.3481,0.4315,0.5197,0.6179,0.7378,1.0000,\
        0.0000,0.0561,0.1148,0.1834,0.2582,0.3368,0.4194,0.5088,0.6106,0.7326,1.0000,\
        0.0000,0.0529,0.1074,0.1741,0.2458,0.3227,0.4050,0.4950,0.5962,0.7200,1.0000,\
        0.0000,0.0513,0.1035,0.1705,0.2427,0.3208,0.4052,0.4983,0.6033,0.7303,1.0000,\
        0.0000,0.0493,0.0985,0.1629,0.2321,0.3079,0.3909,0.4842,0.5895,0.7168,1.0000,\
        0.0000,0.0487,0.0974,0.1616,0.2308,0.3069,0.3937,0.4874,0.5937,0.7248,1.0000,\
        0.0000,0.0473,0.0945,0.1558,0.2225,0.2982,0.3812,0.4767,0.5837,0.7169,1.0000,\
        0.0000,0.0459,0.0919,0.1516,0.2170,0.2915,0.3761,0.4695,0.5750,0.7109,1.0000,\
        0.0000,0.0449,0.0899,0.1482,0.2124,0.2870,0.3716,0.4661,0.5739,0.7081,1.0000,\
        0.0000,0.0442,0.0885,0.1460,0.2096,0.2833,0.3668,0.4606,0.5684,0.7032,1.0000,\
        0.0000,0.0439,0.0878,0.1436,0.2049,0.2800,0.3620,0.4564,0.5669,0.7011,1.0000,\
        0.0000,0.0429,0.0859,0.1408,0.2018,0.2750,0.3573,0.4512,0.5615,0.6991,1.0000,\
        0.0000,0.0426,0.0853,0.1394,0.1996,0.2744,0.3577,0.4513,0.5624,0.7076,1.0000,\
        0.0000,0.0420,0.0840,0.1371,0.1971,0.2683,0.3497,0.4457,0.5592,0.6980,1.0000,\
        0.0000,0.0418,0.0836,0.1354,0.1938,0.2641,0.3452,0.4393,0.5478,0.6842,1.0000,\
        0.0000,0.0420,0.0841,0.1371,0.1969,0.2708,0.3529,0.4473,0.5600,0.7073,1.0000,\
        0.0000,0.0423,0.0846,0.1364,0.1938,0.2657,0.3460,0.4384,0.5495,0.6950,1.0000,\
        0.0000,0.0410,0.0820,0.1326,0.1907,0.2618,0.3429,0.4375,0.5476,0.6933,1.0000,\
        0.0000,0.0412,0.0824,0.1326,0.1895,0.2591,0.3385,0.4332,0.5460,0.6873,1.0000,\
        0.0000,0.0420,0.0840,0.1333,0.1870,0.2583,0.3393,0.4305,0.5459,0.6869,1.0000,\
        0.0000,0.0417,0.0834,0.1341,0.1908,0.2617,0.3424,0.4367,0.5518,0.6927,1.0000}



// ================================================================================================


// ================================================================================================
// the typedefs


// ================================================================================================
// the globals


// ================================================================================================
// the function prototypes




// ================================================================================================
#ifdef __cplusplus
}
#endif // extern "C"

//! @} // end of MOTPARM_EV8M5_430A

#endif // end of _MOTPARM_EV8M5_430A_H_
