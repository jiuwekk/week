// ================================================================================================
//! \file       MotParm_EV8M5.h
//! \brief      
//! \author     sunyanjun
//! \version    1.0.0
//! \date       2017年4月12日
//! \copyright  SANTROLL.
// ================================================================================================

#ifndef _MOTPARM_EV8M5_H_
#define _MOTPARM_EV8M5_H_

//! @defgroup MOTPARM_EV8M5
//! @{

#ifdef __cplusplus
extern "C" {
#endif
// ================================================================================================
// the includes

// ================================================================================================
// the defines

#define ELECZERO              90       //!< 电机旋变零点
#define CURBASE   (3500 * SQRT2)       //!< 电流基值(峰值)*0.1A
#define VOLTBASE            5400       //!< 电压基值*0.1V
#define SPEEDBASE           5000       //!< 转速基值
#define IF                  3418       //!< 等效励磁电流*0.1A
#define BEMF                3170       //!< 1000rpm反电势对应的电压 *0.1V
#define MOTPOLEPAIRS        6          //!< 电机极对数#
#define ENCODERPOLEPAIRS    6          //!< 旋变极对数#
#define SWAPENCODERDIR      0          //!< 旋变方向换向
#if EVCBD_ID == 0x05 || EVCBD_ID == 0x06
#define SWAPPHASE           0          //!< 电机相线换向
#else
#define SWAPPHASE           1          //!< 电机相线换向
#endif
#define MTPA_K3             1.8724     //!< MTPA拟合3次方系数#
#define MTPA_K2             (-3.9266)  //!< MTPA拟合2次方系数#
#define MTPA_K1             2.9487     //!< MTPA拟合1次方系数#
#define MTPA_K0             0.0234     //!< MTPA拟合0次方系数#
#define PEAKPOWER           0          //!< 输出机械功率限制 ，0.1Kw,0=不限制
#define PEAKTORQUE          0          //!< 输出扭矩限制，  NM,0=不限制

#define PWM_LOW_FREQ        2000       //!< 低频，2K
#define PWM_HIGH_FREQ       5100       //!< 高频，5k 高低相等不变频
#define PWM_LOW_FREQ_HZ     2          //!< 低频，电机Hz
#define PWM_HIGH_FREQ_HZ    10         //!< 高频，电机Hz 高低相等不变频

#define KP_ID               3500       //!< D轴Kp参数*0.001
#define KI_ID               2500       //!< D轴Ki参数*0.0001
#define KP_IQ               3500       //!< Q轴Kp参数*0.001
#define KI_IQ               2500       //!< Q轴Ki参数*0.0001
#define KP_FW1              250        //!< IdWeak_Kp参数*0.001
#define KI_FW1              58         //!< IdWeak_Ki参数*0.0001
#define KP_FW2              62         //!< AngleWeak_Kp参数*0.001
#define KI_FW2              15         //!< AngleWeak_Ki参数*0.0001
#define FW1_REF             1.05       //!< IdWeak参考
#define FW2_REF             1.05       //!< AngleWeak参考
#define UDMAX               1.4        //!< D轴电压最大值
#define UQMAX               1.4        //!< Q轴电压最大值

#define DCOVERCUR           5000       //!< 母线过流       0.1A
#define ACOVERCUR1          5500       //!< 相线过流1 0.1A(峰值)
#define ACOVERCUR2          5800       //!< 相线过流2 0.1A(峰值)
#define DCOVERVOLT3         7800       //!< 电压过压3 0.1V
#define DCOVERVOLT2         7500       //!< 电压过压2 0.1V
#define DCOVERVOLT1         7200       //!< 电压过压1 0.1V
#define DCUNDERVOLT1        4000       //!< 电压欠压1 0.1V
#define DCUNDERVOLT2        3000       //!< 电压欠压2 0.1V
#define DCUNDERVOLT3         300       //!< 电压欠压3 0.1V

#define OVERSPD1            3500       //!< 超速1转速
#define OVERSPD2            4000       //!< 超速2转速
#define KP_SPDLIMIT         4000       //!< 限速Kp参数*0.001
#define KI_SPDLIMIT         200        //!< 限速Ki参数*0.0001

#define DIRVECURLIMIT       5000       //!< 驱动母线电流限制*0.1A
#define BRAKECURLIMIT       5000       //!< 制动母线电流限制*0.1A
#define KP_IDCLIMIT         500        //!< 母线限流Kp参数*0.001
#define KI_IDCLIMIT         100        //!< 母线限流Ki参数*0.0001


#define KP_SPDM0            8000       //!< 速度模式0Kp参数*0.001
#define KI_SPDM0            200        //!< 速度模式0Ki参数*0.0001
#define KP_SPDM1            1000       //!< 速度模式1Kp参数*0.001
#define KI_SPDM1            100        //!< 速度模式1Ki参数*0.0001
#define KP_SPDM2            1000       //!< 速度模式2Kp参数*0.001
#define KI_SPDM2            100        //!< 速度模式2Ki参数*0.0001

#define PT100_1             1          //!< PT100_1 0==>没有
#define PT100_2             1          //!< PT100_2 0==>没有


#define TABNSTART           600        //!< 电机特性表中转速起始值rpm
#define TABNEND             3600       //!< 电机特性表中转速最高值rpm
#define TABNNUM             31         //!< 电机特性表中转速点数
#define TABNREFU            5400       //!< 测定特性表时的电压0.1V
#define TABNREFCUR     (3500 * SQRT2)  //!< 测点特性表时的电流0.1A
#define TABYNUM             11         //!< 纵坐标列数


#define TM_TAB {1697,1694,1688,1688,1676,1575,1454,1340,1234,1146,\
        1053,956,878,810,757,715,674,640,607,577,548,522,499,478,455,436,414,391,376,315,0}

#define ISM_TAB {\
        1.0000,1.0000,1.0000,1.0000,1.0000,1.0000,1.0000,1.0000,1.0000,1.0000,\
        0.9475,0.9141,0.8200,0.7500,0.7000,0.6800,0.6500,0.6200,0.6000,0.5800,\
        0.5500,0.5300,0.5100,0.4900,0.4700,0.4500,0.4200,0.3800,0.3600,0.3300,0.1000}

#define TLIN_TAB  {\
        0.0000,0.1175,0.2160,0.3081,0.3988,0.4910,0.5856,0.6822,0.7835,0.8884,1.0000,\
        0.0000,0.1180,0.2167,0.3087,0.3993,0.4913,0.5857,0.6831,0.7840,0.8891,1.0000,\
        0.0000,0.1177,0.2166,0.3083,0.3990,0.4913,0.5844,0.6817,0.7818,0.8875,1.0000,\
        0.0000,0.1183,0.2174,0.3099,0.4007,0.4929,0.5866,0.6831,0.7840,0.8889,1.0000,\
        0.0000,0.1182,0.2166,0.3084,0.3981,0.4891,0.5820,0.6768,0.7755,0.8790,1.0000,\
        0.0000,0.1123,0.2060,0.2921,0.3761,0.4605,0.5472,0.6383,0.7387,0.8569,1.0000,\
        0.0000,0.1056,0.1921,0.2715,0.3503,0.4320,0.5192,0.6124,0.7157,0.8410,1.0000,\
        0.0000,0.0985,0.1781,0.2542,0.3319,0.4150,0.5028,0.5958,0.6992,0.8261,1.0000,\
        0.0000,0.0907,0.1656,0.2413,0.3207,0.4042,0.4899,0.5818,0.6863,0.8109,1.0000,\
        0.0000,0.0843,0.1597,0.2362,0.3168,0.3993,0.4854,0.5762,0.6808,0.8049,1.0000,\
        0.0000,0.0816,0.1623,0.2437,0.3266,0.4111,0.4974,0.5904,0.6944,0.8188,1.0000,\
        0.0000,0.0810,0.1642,0.2472,0.3297,0.4131,0.5025,0.5953,0.6882,0.8023,1.0000,\
        0.0000,0.0896,0.1808,0.2687,0.3556,0.4413,0.5260,0.6125,0.7081,0.8241,1.0000,\
        0.0000,0.0910,0.1811,0.2688,0.3547,0.4396,0.5250,0.6145,0.7137,0.8310,1.0000,\
        0.0000,0.0851,0.1717,0.2587,0.3447,0.4305,0.5183,0.6103,0.7102,0.8315,1.0000,\
        0.0000,0.0769,0.1581,0.2423,0.3274,0.4125,0.4976,0.5914,0.6929,0.8133,1.0000,\
        0.0000,0.0717,0.1486,0.2303,0.3145,0.3987,0.4862,0.5811,0.6834,0.8059,1.0000,\
        0.0000,0.0681,0.1415,0.2208,0.3040,0.3893,0.4778,0.5727,0.6793,0.8025,1.0000,\
        0.0000,0.0646,0.1338,0.2096,0.2916,0.3768,0.4650,0.5605,0.6654,0.7898,1.0000,\
        0.0000,0.0614,0.1274,0.2015,0.2817,0.3654,0.4543,0.5482,0.6543,0.7802,1.0000,\
        0.0000,0.0602,0.1245,0.1966,0.2768,0.3609,0.4505,0.5474,0.6550,0.7830,1.0000,\
        0.0000,0.0580,0.1195,0.1900,0.2689,0.3533,0.4425,0.5380,0.6448,0.7766,1.0000,\
        0.0000,0.0567,0.1164,0.1857,0.2629,0.3465,0.4359,0.5319,0.6410,0.7738,1.0000,\
        0.0000,0.0556,0.1139,0.1832,0.2603,0.3429,0.4310,0.5286,0.6410,0.7733,1.0000,\
        0.0000,0.0548,0.1118,0.1787,0.2544,0.3361,0.4234,0.5221,0.6316,0.7672,1.0000,\
        0.0000,0.0545,0.1109,0.1770,0.2516,0.3347,0.4258,0.5249,0.6366,0.7713,1.0000,\
        0.0000,0.0559,0.1138,0.1784,0.2531,0.3370,0.4295,0.5303,0.6430,0.7807,1.0000,\
        0.0000,0.0575,0.1170,0.1822,0.2592,0.3453,0.4400,0.5436,0.6606,0.7961,1.0000,\
        0.0000,0.0561,0.1144,0.1804,0.2574,0.3429,0.4358,0.5388,0.6600,0.8019,1.0000,\
        0.0000,0.0534,0.1071,0.1634,0.2250,0.2966,0.3769,0.4625,0.6421,0.7976,1.0000,\
        0.0000,0.0534,0.1071,0.1634,0.2250,0.2966,0.3769,0.4625,0.6421,0.7976,1.0000}



// ================================================================================================


// ================================================================================================
// the typedefs


// ================================================================================================
// the globals


// ================================================================================================
// the function prototypes




// ================================================================================================
#ifdef __cplusplus
}
#endif // extern "C"

//! @} // end of MOTPARM_EV8M5

#endif // end of _MOTPARM_EV8M5_H_
