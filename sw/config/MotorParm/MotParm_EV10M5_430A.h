// ================================================================================================
//! \file       MotParm_EV10M5_430A.h
//! \brief      EV390电机 370A 2500Nm
//! \author     XJH
//! \version    1.0.0
//! \date       2019.05.17
//! \copyright  SANTROLL.
// ================================================================================================

#ifndef _MOTPARM_EV10M5_430A_H_
#define _MOTPARM_EV10M5_430A_H_

//! @defgroup MOTPARM_EV10M5_430A
//! @{

#ifdef __cplusplus
extern "C" {
#endif
// ================================================================================================
// the includes

// ================================================================================================
// the defines

#define ELECZERO              90       //!< 电机旋变零点，台架10m5
#define CURBASE   (4300 * SQRT2)       //!< 电流基值(峰值)*0.1A
#define VOLTBASE            5400       //!< 电压基值*0.1V
#define SPEEDBASE           5000       //!< 转速基值
#define IF                  3362       //!< 等效励磁电流*0.1A
#define BEMF                4385       //!< 1000rpm反电势对应的电压 *0.1V
#define MOTPOLEPAIRS        6          //!< 电机极对数#
#define ENCODERPOLEPAIRS    6          //!< 旋变极对数#
#define SWAPENCODERDIR      0          //!< 旋变方向换向
#if EVCBD_ID == 0x05 || EVCBD_ID == 0x06
#define SWAPPHASE           0          //!< 电机相线换向
#else
#define SWAPPHASE           1          //!< 电机相线换向
#endif
//y = 1.9929x3 - 4.2391x2 + 3.1976x + 0.0237.最大角度54.9
#define MTPA_K3             1.9929     //!< MTPA拟合3次方系数#
#define MTPA_K2             (-4.2391)  //!< MTPA拟合2次方系数#
#define MTPA_K1             3.1976     //!< MTPA拟合1次方系数#
#define MTPA_K0             0.0237     //!< MTPA拟合0次方系数#
#define PEAKPOWER           0          //!< 输出机械功率限制 ，0.1Kw,0=不限制
#define PEAKTORQUE          0          //!< 输出扭矩限制，  NM,0=不限制

#define PWM_LOW_FREQ        2000       //!< 低频，2K
#define PWM_HIGH_FREQ       5100       //!< 高频，5k 高低相等不变频
#define PWM_LOW_FREQ_HZ     2          //!< 低频，电机Hz
#define PWM_HIGH_FREQ_HZ    10         //!< 高频，电机Hz 高低相等不变频

#define KP_ID               4000       //!< D轴Kp参数*0.001
#define KI_ID               2500       //!< D轴Ki参数*0.0001
#define KP_IQ               4000       //!< Q轴Kp参数*0.001
#define KI_IQ               2500       //!< Q轴Ki参数*0.0001
#define KP_FW1              250        //!< IdWeak_Kp参数*0.001
#define KI_FW1              58         //!< IdWeak_Ki参数*0.0001
#define KP_FW2              62         //!< AngleWeak_Kp参数*0.001
#define KI_FW2              15         //!< AngleWeak_Ki参数*0.0001
#define FW1_REF             1.05       //!< IdWeak参考
#define FW2_REF             1.05       //!< AngleWeak参考
#define UDMAX               1.4        //!< D轴电压最大值
#define UQMAX               1.4        //!< Q轴电压最大值

#define DCOVERCUR           5000       //!< 母线过流       0.1A
#define ACOVERCUR1          7500       //!< 相线过流1 0.1A(峰值)
#define ACOVERCUR2          7800       //!< 相线过流2 0.1A(峰值)
#define DCOVERVOLT3         7800       //!< 电压过压3 0.1V
#define DCOVERVOLT2         7500       //!< 电压过压2 0.1V
#define DCOVERVOLT1         7200       //!< 电压过压1 0.1V
#define DCUNDERVOLT1        4000       //!< 电压欠压1 0.1V
#define DCUNDERVOLT2        3000       //!< 电压欠压2 0.1V
#define DCUNDERVOLT3         300       //!< 电压欠压3 0.1V

#define OVERSPD1            3500       //!< 超速1转速
#define OVERSPD2            4000       //!< 超速2转速
#define KP_SPDLIMIT         4000       //!< 限速Kp参数*0.001
#define KI_SPDLIMIT         200        //!< 限速Ki参数*0.0001

#define DIRVECURLIMIT       5000       //!< 驱动母线电流限制*0.1A
#define BRAKECURLIMIT       5000       //!< 制动母线电流限制*0.1A
#define KP_IDCLIMIT         500        //!< 母线限流Kp参数*0.001
#define KI_IDCLIMIT         100        //!< 母线限流Ki参数*0.0001


#define KP_SPDM0            8000       //!< 速度模式0Kp参数*0.001
#define KI_SPDM0            200        //!< 速度模式0Ki参数*0.0001
#define KP_SPDM1            1000       //!< 速度模式1Kp参数*0.001
#define KI_SPDM1            100        //!< 速度模式1Ki参数*0.0001
#define KP_SPDM2            1000       //!< 速度模式2Kp参数*0.001
#define KI_SPDM2            100        //!< 速度模式2Ki参数*0.0001

#define PT100_1             1          //!< PT100_1 0==>没有
#define PT100_2             1          //!< PT100_2 0==>没有

#define TABNSTART           400        //!< 电机特性表中转速起始值rpm
#define TABNEND             3000       //!< 电机特性表中转速最高值rpm
#define TABNNUM             27         //!< 电机特性表中转速点数
#define TABNREFU            3664       //!< 测定特性表时的电压0.1V
#define TABNREFCUR     (4300 * SQRT2)  //!< 测点特性表时的电流0.1A
#define TABYNUM             11         //!< 纵坐标列数

#define TM_TAB {\
        2844,2410,1920,1570,1324,1148,1010, 897, 808, 734,\
         670, 619, 576, 536, 502, 469, 442, 416, 394, 375,\
         356, 338, 323, 307, 294, 281, 270,}

#define ISM_TAB {\
        1.0000,1.0000,0.9600,0.8791,0.8046,0.7097,0.6184,0.5558,0.5059,0.4597,\
        0.4203,0.3943,0.3608,0.3438,0.3250,0.3009,0.2816,0.2641,0.2506,0.2401,\
        0.2291,0.2207,0.2064,0.1969,0.1846,0.1794,0.1696,}

#define TLIN_TAB  {\
0.0000,0.1097,0.2009,0.2854,0.3717,0.4609,0.5523,0.6478,0.7488,0.8589,1.0000,\
0.0000,0.0952,0.1731,0.2469,0.3192,0.3926,0.4728,0.5657,0.6668,0.7956,1.0000,\
0.0000,0.0795,0.1482,0.2142,0.2853,0.3602,0.4387,0.5230,0.6193,0.7379,1.0000,\
0.0000,0.0718,0.1432,0.2150,0.2896,0.3658,0.4453,0.5302,0.6249,0.7404,1.0000,\
0.0000,0.0775,0.1563,0.2344,0.3110,0.3875,0.4668,0.5505,0.6422,0.7513,1.0000,\
0.0000,0.0712,0.1462,0.2236,0.3007,0.3778,0.4568,0.5398,0.6315,0.7430,1.0000,\
0.0000,0.0640,0.1325,0.2071,0.2850,0.3638,0.4467,0.5350,0.6312,0.7482,1.0000,\
0.0000,0.0583,0.1202,0.1913,0.2680,0.3481,0.4321,0.5218,0.6213,0.7437,1.0000,\
0.0000,0.0540,0.1100,0.1771,0.2502,0.3290,0.4137,0.5047,0.6067,0.7324,1.0000,\
0.0000,0.0509,0.1025,0.1692,0.2411,0.3190,0.4036,0.4956,0.6007,0.7293,1.0000,\
0.0000,0.0491,0.0982,0.1624,0.2316,0.3080,0.3944,0.4878,0.5940,0.7280,1.0000,\
0.0000,0.0467,0.0934,0.1547,0.2215,0.2963,0.3800,0.4713,0.5781,0.7097,1.0000,\
0.0000,0.0460,0.0920,0.1518,0.2173,0.2919,0.3745,0.4686,0.5783,0.7119,1.0000,\
0.0000,0.0440,0.0880,0.1441,0.2057,0.2793,0.3617,0.4559,0.5644,0.6934,1.0000,\
0.0000,0.0431,0.0862,0.1411,0.2018,0.2739,0.3560,0.4502,0.5581,0.6903,1.0000,\
0.0000,0.0425,0.0849,0.1382,0.1974,0.2672,0.3490,0.4426,0.5500,0.6871,1.0000,\
0.0000,0.0430,0.0861,0.1395,0.1978,0.2683,0.3492,0.4433,0.5553,0.6945,1.0000,\
0.0000,0.0426,0.0851,0.1377,0.1957,0.2685,0.3489,0.4400,0.5500,0.6923,1.0000,\
0.0000,0.0416,0.0833,0.1349,0.1932,0.2644,0.3462,0.4414,0.5523,0.6888,1.0000,\
0.0000,0.0416,0.0833,0.1334,0.1894,0.2604,0.3410,0.4314,0.5371,0.6827,1.0000,\
0.0000,0.0410,0.0819,0.1317,0.1883,0.2574,0.3333,0.4207,0.5407,0.6900,1.0000,\
0.0000,0.0411,0.0823,0.1285,0.1785,0.2487,0.3351,0.4293,0.5444,0.6833,1.0000,\
0.0000,0.0411,0.0823,0.1285,0.1785,0.2487,0.3351,0.4293,0.5444,0.6833,1.0000,\
0.0000,0.0411,0.0823,0.1285,0.1785,0.2487,0.3351,0.4293,0.5444,0.6833,1.0000,\
0.0000,0.0411,0.0823,0.1285,0.1785,0.2487,0.3351,0.4293,0.5444,0.6833,1.0000,\
0.0000,0.0411,0.0823,0.1285,0.1785,0.2487,0.3351,0.4293,0.5444,0.6833,1.0000,\
0.0000,0.0411,0.0823,0.1285,0.1785,0.2487,0.3351,0.4293,0.5444,0.6833,1.0000}
// ================================================================================================
// the typedefs


// ================================================================================================
// the globals


// ================================================================================================
// the function prototypes




// ================================================================================================
#ifdef __cplusplus
}
#endif // extern "C"

//! @} // end of MOTPARM_EV10M5_430A

#endif // end of _MOTPARM_EV10M5_430A_H_
