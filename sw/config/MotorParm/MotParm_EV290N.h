// ================================================================================================
//! \file       MotParm_EV290.h
//! \brief      
//! \author     sunyanjun
//! \version    1.0.0
//! \date       2022年4月29日测试用
//! \copyright  SANTROLL.
// ================================================================================================

#ifndef _MOTPARM_EV290_H_
#define _MOTPARM_EV290_H_

//! @defgroup MOTPARM_EV290
//! @{

#ifdef __cplusplus
extern "C" {
#endif
// ================================================================================================
// the includes

// ================================================================================================
// the defines

#define ELECZERO            200       //!< 电机旋变零点，8.5m车上电机
#define CURBASE   (3700 * SQRT2)       //!< 电流基值(峰值)*0.1A
#define VOLTBASE            3000       //!< 电压基值*0.1V
#define SPEEDBASE           5000       //!< 转速基值
#define IF                  2804       //!< 等效励磁电流*0.1A
#define BEMF                1907       //!< 1000rpm反电势对应的电压 *0.1V
#define MOTPOLEPAIRS        5          //!< 电机极对数#
#define ENCODERPOLEPAIRS    5          //!< 旋变极对数#
#define SWAPENCODERDIR      0          //!< 旋变方向换向
#define SWAPPHASE           1          //!< 电机相线换向
//y = 1.6752x3 - 3.7148x2 + 2.9001x + 0.0207
#define MTPA_K3             1.6752     //!< MTPA拟合3次方系数#
#define MTPA_K2             (-3.7148)  //!< MTPA拟合2次方系数#
#define MTPA_K1             2.9001     //!< MTPA拟合1次方系数#
#define MTPA_K0             0.0207     //!< MTPA拟合0次方系数#
#define PEAKPOWER           0          //!< 输出机械功率限制 ，0.1Kw,0=不限制
#define PEAKTORQUE          0          //!< 输出扭矩限制，  NM,0=不限制

#define PWM_LOW_FREQ        6500       //!< 低频，2K
#define PWM_HIGH_FREQ       6500       //!< 高频，5k 高低相等不变频
#define PWM_LOW_FREQ_HZ     2          //!< 低频，电机Hz
#define PWM_HIGH_FREQ_HZ    10         //!< 高频，电机Hz 高低相等不变频

#define KP_ID               1500       //!< D轴Kp参数*0.001
#define KI_ID               2000       //!< D轴Ki参数*0.0001
#define KP_IQ               1500       //!< Q轴Kp参数*0.001
#define KI_IQ               2000       //!< Q轴Ki参数*0.0001
#define KP_FW1              125        //!< IdWeak_Kp参数*0.01
#define KI_FW1              3000       //!< IdWeak_Ki参数*0.01
#define KP_FW2              62         //!< AngleWeak_Kp参数*0.001
#define KI_FW2              15         //!< AngleWeak_Ki参数*0.0001
#define FW1_REF             1.03       //!< IdWeak参考
#define FW2_REF             1.05       //!< AngleWeak参考
#define UDMAX               1.4        //!< D轴电压最大值
#define UQMAX               1.4        //!< Q轴电压最大值

#define DCOVERCUR           5000       //!< 母线过流       0.1A
#define ACOVERCUR1          5500       //!< 相线过流1 0.1A(峰值)
#define ACOVERCUR2          5800       //!< 相线过流2 0.1A(峰值)
#define DCOVERVOLT3         7800       //!< 电压过压3 0.1V
#define DCOVERVOLT2         7500       //!< 电压过压2 0.1V
#define DCOVERVOLT1         7200       //!< 电压过压1 0.1V
#define DCUNDERVOLT1        2000       //!< 电压欠压1 0.1V
#define DCUNDERVOLT2        1500       //!< 电压欠压2 0.1V
#define DCUNDERVOLT3         300       //!< 电压欠压3 0.1V

#define OVERSPD1            8000       //!< 超速1转速
#define OVERSPD2            10000       //!< 超速2转速
#define KP_SPDLIMIT         4000       //!< 限速Kp参数*0.001
#define KI_SPDLIMIT         200        //!< 限速Ki参数*0.0001

#define DIRVECURLIMIT       5000       //!< 驱动母线电流限制*0.1A
#define BRAKECURLIMIT       5000       //!< 制动母线电流限制*0.1A
#define KP_IDCLIMIT         20        //!< 母线限流Kp参数*0.001
#define KI_IDCLIMIT         0        //!< 母线限流Ki参数*0.0001


#define KP_SPDM0            8000       //!< 速度模式0Kp参数*0.001
#define KI_SPDM0            200        //!< 速度模式0Ki参数*0.0001
#define KP_SPDM1            1000       //!< 速度模式1Kp参数*0.001
#define KI_SPDM1            100        //!< 速度模式1Ki参数*0.0001
#define KP_SPDM2            1000       //!< 速度模式2Kp参数*0.001
#define KI_SPDM2            100        //!< 速度模式2Ki参数*0.0001

#define PT100_1             1          //!< PT100_1 0==>没有
#define PT100_2             1          //!< PT100_2 0==>没有
//#define PT100_1             0          //!< PT100_1 0==>没有
//#define PT100_2             0          //!< PT100_2 0==>没有

#define TABNSTART           700        //!< 电机特性表中转速起始值rpm
#define TABNEND             3000       //!< 电机特性表中转速最高值rpm
#define TABNNUM             24         //!< 电机特性表中转速点数
#define TABNREFU            3000       //!< 测定特性表时的电压0.1V
#define TABNREFCUR     (3700 * SQRT2)  //!< 测点特性表时的电流0.1A
#define TABYNUM             11         //!< 特性表二维表列数


#define TM_TAB {1007,1005,1004,1003,1002,1000,999,999,956,902,\
        848,796,750,707,668,634,602,570,541,515,\
        490,467,449,429,}

#define ISM_TAB {\
        1.0000,1.0000,1.0000,1.0000,1.0000,0.9500,0.9080,0.8412,0.7823,0.7360,\
        0.6977,0.6357,0.6114,0.5678,0.5445,0.5151,0.4977,0.4639,0.4358,0.4101,\
        0.4055,0.3858,0.3727,0.3539,}

#define TLIN_TAB  {\
        0.0000,0.1186,0.2132,0.3004,0.3883,0.4769,0.5696,0.6662,0.7676,0.8771,1.0000,\
        0.0000,0.1174,0.2102,0.2961,0.3807,0.4679,0.5586,0.6525,0.7513,0.8620,1.0000,\
        0.0000,0.1083,0.1920,0.2688,0.3457,0.4235,0.5025,0.5911,0.6930,0.8198,1.0000,\
        0.0000,0.0988,0.1730,0.2430,0.3120,0.3880,0.4697,0.5584,0.6608,0.7841,1.0000,\
        0.0000,0.0872,0.1562,0.2228,0.2911,0.3656,0.4453,0.5318,0.6300,0.7531,1.0000,\
        0.0000,0.0831,0.1516,0.2182,0.2902,0.3667,0.4478,0.5351,0.6323,0.7526,1.0000,\
        0.0000,0.0784,0.1488,0.2179,0.2923,0.3684,0.4493,0.5359,0.6327,0.7523,1.0000,\
        0.0000,0.0788,0.1495,0.2216,0.3066,0.3891,0.4716,0.5597,0.6600,0.7790,1.0000,\
        0.0000,0.0787,0.1625,0.2450,0.3254,0.4071,0.4929,0.5815,0.6717,0.7767,1.0000,\
        0.0000,0.0850,0.1700,0.2520,0.3318,0.4103,0.4866,0.5700,0.6584,0.7643,1.0000,\
        0.0000,0.0818,0.1612,0.2398,0.3185,0.3971,0.4773,0.5586,0.6481,0.7562,1.0000,\
        0.0000,0.0824,0.1596,0.2377,0.3179,0.3969,0.4809,0.5681,0.6621,0.7722,1.0000,\
        0.0000,0.0740,0.1489,0.2245,0.3000,0.3807,0.4628,0.5487,0.6417,0.7537,1.0000,\
        0.0000,0.0722,0.1453,0.2200,0.2972,0.3780,0.4621,0.5511,0.6488,0.7646,1.0000,\
        0.0000,0.0678,0.1373,0.2090,0.2870,0.3667,0.4506,0.5394,0.6366,0.7557,1.0000,\
        0.0000,0.0653,0.1329,0.2031,0.2785,0.3583,0.4411,0.5293,0.6304,0.7505,1.0000,\
        0.0000,0.0647,0.1300,0.1962,0.2689,0.3471,0.4306,0.5193,0.6176,0.7379,1.0000,\
        0.0000,0.0639,0.1292,0.1964,0.2689,0.3469,0.4317,0.5237,0.6243,0.7489,1.0000,\
        0.0000,0.0628,0.1268,0.1929,0.2679,0.3483,0.4343,0.5268,0.6324,0.7606,1.0000,\
        0.0000,0.0624,0.1261,0.1919,0.2650,0.3446,0.4315,0.5257,0.6330,0.7606,1.0000,\
        0.0000,0.0631,0.1247,0.1845,0.2542,0.3315,0.4168,0.5086,0.6137,0.7420,1.0000,\
        0.0000,0.0586,0.1183,0.1803,0.2529,0.3315,0.4133,0.5043,0.6089,0.7379,1.0000,\
        0.0000,0.0578,0.1165,0.1776,0.2489,0.3269,0.4082,0.5030,0.6082,0.7400,1.0000,\
        0.0000,0.0569,0.1150,0.1772,0.2467,0.3220,0.4019,0.4967,0.6071,0.7342,1.0000}
// ================================================================================================
// the typedefs


// ================================================================================================
// the globals


// ================================================================================================
// the function prototypes




// ================================================================================================
#ifdef __cplusplus
}
#endif // extern "C"

//! @} // end of MOTPARM_EV290

#endif // end of _MOTPARM_EV290_H_
