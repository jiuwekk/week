// ================================================================================================
//! \file       MotParm_TZ210XS30H_310HC.h
//! \brief      
//! \author     sunyanjun
//! \version    1.0.0
//! \date       2017年4月12日
//! \copyright  SANTROLL.
// ================================================================================================

#ifndef _MOTPARM_TZ210XS30H_310HC_H_
#define _MOTPARM_TZ210XS30H_310HC_H_

//! @defgroup
//! @{

#ifdef __cplusplus
extern "C" {
#endif
// ================================================================================================
// the includes

// ================================================================================================
// the defines

#define ELECZERO            2048       //!< 电机旋变零点，8.5m车上电机
#define CURBASE             (2500 * SQRT2)//!< 电流基值(峰值)*0.1A
#define VOLTBASE            3000       //!< 电压基值*0.1V
#define SPEEDBASE           8000       //!< 转速基值
#define IF                  1969       //!< 等效励磁电流*0.1A
#define BEMF                1571       //!< 1000rpm反电势对应的电压 *0.1V
#define MOTPOLEPAIRS        3          //!< 电机极对数#
#define ENCODERPOLEPAIRS    3          //!< 旋变极对数#
#define SWAPENCODERDIR      0          //!< 旋变方向换向
#define SWAPPHASE           1          //!< 电机相线换向
//1.5429x3 - 3.5843x2 + 2.933x + 0.0154
#define MTPA_K3             1.5429     //!< MTPA拟合3次方系数#
#define MTPA_K2             (-3.5843)  //!< MTPA拟合2次方系数#
#define MTPA_K1             2.933      //!< MTPA拟合1次方系数#
#define MTPA_K0             0.0154     //!< MTPA拟合0次方系数#
#define PEAKPOWER           0          //!< 输出机械功率限制 ，0.1Kw,0=不限制
#define PEAKTORQUE          0          //!< 输出扭矩限制，  NM,0=不限制

#define PWM_LOW_FREQ        2000       //!< 低频，2K
#define PWM_HIGH_FREQ       5100       //!< 高频，5k 高低相等不变频
#define PWM_LOW_FREQ_HZ     2          //!< 低频，电机Hz
#define PWM_HIGH_FREQ_HZ    10         //!< 高频，电机Hz 高低相等不变频

#define KP_ID               2500       //!< D轴Kp参数*0.001
#define KI_ID               300        //!< D轴Ki参数*0.0001
#define KP_IQ               2500       //!< Q轴Kp参数*0.001
#define KI_IQ               300        //!< Q轴Ki参数*0.0001
#define KP_FW1              250        //!< IdWeak_Kp参数*0.001
#define KI_FW1              58         //!< IdWeak_Ki参数*0.0001
#define KP_FW2              62         //!< AngleWeak_Kp参数*0.001
#define KI_FW2              15         //!< AngleWeak_Ki参数*0.0001
#define FW1_REF             1.05       //!< IdWeak参考
#define FW2_REF             1.05       //!< AngleWeak参考
#define UDMAX               1.4        //!< D轴电压最大值
#define UQMAX               1.4        //!< Q轴电压最大值

#define DCOVERCUR           5000       //!< 母线过流       0.1A
#define ACOVERCUR1          4242       //!< 相线过流1 0.1A(峰值)
#define ACOVERCUR2          4596       //!< 相线过流2 0.1A(峰值)
#define DCOVERVOLT3         5000       //!< 电压过压3 0.1V
#define DCOVERVOLT2         4500       //!< 电压过压2 0.1V
#define DCOVERVOLT1         4000       //!< 电压过压1 0.1V
#define DCUNDERVOLT1        1500       //!< 电压欠压1 0.1V
#define DCUNDERVOLT2        1000       //!< 电压欠压2 0.1V
#define DCUNDERVOLT3         300       //!< 电压欠压3 0.1V

#define OVERSPD1            8000       //!< 超速1转速
#define OVERSPD2           10000       //!< 超速2转速
#define KP_SPDLIMIT         4000       //!< 限速Kp参数*0.001
#define KI_SPDLIMIT         200        //!< 限速Ki参数*0.0001

#define DIRVECURLIMIT       5000       //!< 驱动母线电流限制*0.1A
#define BRAKECURLIMIT       5000       //!< 制动母线电流限制*0.1A
#define KP_IDCLIMIT         500        //!< 母线限流Kp参数*0.001
#define KI_IDCLIMIT         100        //!< 母线限流Ki参数*0.0001


#define KP_SPDM0            4000       //!< 速度模式0Kp参数*0.001
#define KI_SPDM0            100        //!< 速度模式0Ki参数*0.0001
#define KP_SPDM1            1000       //!< 速度模式1Kp参数*0.001
#define KI_SPDM1            100        //!< 速度模式1Ki参数*0.0001
#define KP_SPDM2            1000       //!< 速度模式2Kp参数*0.001
#define KI_SPDM2            100        //!< 速度模式2Ki参数*0.0001

#define PT100_1             1          //!< PT100_1 0==>没有
#define PT100_2             0          //!< PT100_2 0==>没有

#define TABNSTART           200        //!< 电机特性表中转速起始值rpm
#define TABNEND             3000       //!< 电机特性表中转速最高值rpm
#define TABNNUM             29         //!< 电机特性表中转速点数
#define TABNREFU            1000       //!< 测定特性表时的电压0.1V
#define TABNREFCUR     (2500 * SQRT2)  //!< 测点特性表时的电流0.1A
#define TABYNUM             11         //!< 特性表二维表列数


#define TM_TAB {460,460,440,350,277,218,185,162,143,128,\
        112,98,85,76,70,66,62,59,55,52,\
        50,48,46,44,42,40,38,37,36}

// 2020-08-29
//#define ISM_TAB {\
        1.0000,1.0000,0.8550,0.7740,0.6662,0.6039,0.5149,0.4705,0.4174,0.3765,\
        0.3437,0.3043,0.2851,0.2663,0.2411,0.2321,0.2118,0.2055,0.1938,0.1783,\
        0.1713,0.1669,0.1585,0.1473,0.1432,0.1331,0.1264,0.1237,0.1152}
#define ISM_TAB {\
        1.0000,1.0000,0.9500,0.8600,0.7402,0.6039,0.5149,0.4705,0.4174,0.3765,\
        0.3437,0.3113,0.2851,0.2663,0.2411,0.2321,0.2118,0.2055,0.1938,0.1783,\
        0.1713,0.1669,0.1585,0.1473,0.1432,0.1331,0.1264,0.1237,0.1152}


//  扭矩精度标定
#define TLIN_TAB  {\
        0.0000,0.0998,0.1867,0.2696,0.3538,0.4422,0.5355,0.6340,0.7410,0.8597,1.0000,\
        0.0000,0.0900,0.1697,0.2462,0.3219,0.3989,0.4803,0.5672,0.6578,0.7671,1.0000,\
        0.0000,0.0795,0.1523,0.2208,0.2854,0.3511,0.4195,0.4951,0.5725,0.7250,1.0000,\
        0.0000,0.0686,0.1325,0.1925,0.2600,0.3312,0.4071,0.4929,0.5917,0.7250,1.0000,\
        0.0000,0.0647,0.1352,0.2123,0.2869,0.3667,0.4475,0.5324,0.6289,0.7471,1.0000,\
        0.0000,0.0589,0.1200,0.1860,0.2565,0.3295,0.4053,0.4921,0.5833,0.7045,1.0000,\
        0.0000,0.0562,0.1139,0.1774,0.2470,0.3222,0.4035,0.4894,0.5914,0.7175,1.0000,\
        0.0000,0.0516,0.1040,0.1685,0.2367,0.3088,0.3847,0.4736,0.5767,0.7017,1.0000,\
        0.0000,0.0518,0.1040,0.1610,0.2225,0.2938,0.3743,0.4600,0.5620,0.6844,1.0000,\
        0.0000,0.0490,0.0981,0.1550,0.2157,0.2893,0.3677,0.4555,0.5540,0.6814,1.0000,\
        0.0000,0.0470,0.0940,0.1513,0.2123,0.2846,0.3569,0.4422,0.5467,0.6767,1.0000,\
        0.0000,0.0478,0.0956,0.1557,0.2185,0.2846,0.3660,0.4578,0.5600,0.6900,1.0000,\
        0.0000,0.0471,0.0941,0.1538,0.2167,0.2833,0.3600,0.4500,0.5571,0.6833,1.0000,\
        0.0000,0.0500,0.1000,0.1536,0.2091,0.2773,0.3556,0.4437,0.5500,0.6900,1.0000,\
        0.0000,0.0493,0.0986,0.1558,0.2160,0.2850,0.3600,0.4471,0.5533,0.6820,1.0000,\
        0.0000,0.0508,0.1017,0.1567,0.2140,0.2800,0.3575,0.4457,0.5560,0.6880,1.0000,\
        0.0000,0.0517,0.1036,0.1600,0.2200,0.2889,0.3650,0.4567,0.5720,0.7267,1.0000,\
        0.0000,0.0536,0.1067,0.1558,0.2075,0.2813,0.3550,0.4383,0.5550,0.7033,1.0000,\
        0.0000,0.0550,0.1091,0.1591,0.2111,0.2722,0.3429,0.4300,0.5400,0.6833,1.0000,\
        0.0000,0.0578,0.1127,0.1600,0.2100,0.2750,0.3533,0.4480,0.5520,0.6933,1.0000,\
        0.0000,0.0556,0.1100,0.1600,0.2143,0.2857,0.3667,0.4600,0.5750,0.7000,1.0000,\
        0.0000,0.0533,0.1067,0.1600,0.2150,0.2750,0.3560,0.4520,0.5600,0.7067,1.0000,\
        0.0000,0.0575,0.1133,0.1644,0.2200,0.2857,0.3600,0.4550,0.5700,0.7200,1.0000,\
        0.0000,0.0629,0.1200,0.1689,0.2229,0.2857,0.3680,0.4560,0.5733,0.7300,1.0000,\
        0.0000,0.0600,0.1156,0.1622,0.2133,0.2833,0.3640,0.4480,0.5533,0.6933,1.0000,\
        0.0000,0.0667,0.1222,0.1667,0.2167,0.2833,0.3600,0.4500,0.5667,0.7000,1.0000,\
        0.0000,0.0650,0.1225,0.1713,0.2267,0.2917,0.3850,0.4825,0.5800,0.7550,1.0000,\
        0.0000,0.0617,0.1200,0.1729,0.2300,0.2917,0.3640,0.4475,0.5533,0.7300,1.0000,\
        0.0000,0.0583,0.1167,0.1750,0.2333,0.2917,0.3750,0.4625,0.5667,0.7250,1.0000}
// ================================================================================================
// the typedefs


// ================================================================================================
// the globals


// ================================================================================================
// the function prototypes




// ================================================================================================
#ifdef __cplusplus
}
#endif // extern "C"

//! @} // end of MOTPARM_TZ210XS30H_310HC

#endif // end of _MOTPARM_TZ210XS30H_310HC_H_
